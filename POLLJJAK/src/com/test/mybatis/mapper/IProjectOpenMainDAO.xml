<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test.mybatis.IProjectOpenMainDAO">
	
	<!-- 모집 진행중 프로젝트 정보 조회 -->
	<select id="getProject" resultType="com.test.dto.ProjectOpenMainDTO">
		SELECT DISTINCT P.P_NAME,
			   P.P_CODE, 
			   TO_CHAR(P.P_START_DATE, 'YYYY-MM-DD') AS P_START_DATE, 
			   TO_CHAR(P.P_END_DATE, 'YYYY-MM-DD') AS P_END_DATE 
		FROM P P, P_POSITION PP, P_TEAM_CONFIRM PTC, P_FAILED PF
		WHERE P.USER_CODE = #{user_code}
      		AND P.P_CODE != PTC.P_CODE
      		AND PF.P_CODE != P.P_CODE
	</select>
	
	<!-- 모집 실패 프로젝트 정보 조회 -->
	<select id="getfailedProject" resultType="com.test.dto.ProjectOpenMainDTO">
		SELECT P.P_NAME,
		 	   P.P_CODE, 
		 	   TO_CHAR(P.P_START_DATE, 'YYYY-MM-DD') AS P_START_DATE, 
			   TO_CHAR(P.P_END_DATE, 'YYYY-MM-DD') AS P_END_DATE 
		FROM P P,
		  	 P_FAILED PF
		WHERE P.USER_CODE = #{user_code}
      		  AND P.P_CODE = PF.P_CODE
	</select> 

</mapper>