<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test.mybatis.IUserDAO">

	<!-- 쿼리문 가져올 때 『;』 제외하고 가져오기!! -->
	<!-- 테스트용 쿼리문 -->
	<select id="list" resultType="com.test.mybatis.UserDTO">
		SELECT U_CODE, USER_CODE, SUBJECT_PART_CODE, REGION_PART_CODE
			 , POSITION_PART_CODE, TIME_PART_CODE, Domain_Part_Code
     		 , U_NAME, U_NICKNAME, U_TEL, U_EMAIL, U_INTRO, U_PORTFOLIO_URL
             , U_ID, U_PW
		FROM U
		ORDER BY U_CODE
	</select>
	
	<select id="add" resultType="com.test.mybatis.UserDTO" statementType="CALLABLE">
		{CALL REGISTRATION(#{subject_part_code, mode=IN, jdbcType=VARCHAR}
          , #{region_part_code, mode=IN, jdbcType=VARCHAR}
          , #{position_part_code, mode=IN, jdbcType=VARCHAR}
          , #{time_part_code, mode=IN, jdbcType=VARCHAR}
          , #{domain_part_code, mode=IN, jdbcType=VARCHAR}
          , #{u_name, mode=IN, jdbcType=VARCHAR}
          , #{u_nickname, mode=IN, jdbcType=VARCHAR}
          , #{u_tel, mode=IN, jdbcType=VARCHAR}
          , #{u_email, mode=IN, jdbcType=VARCHAR}
          , #{u_intro, mode=IN, jdbcType=VARCHAR}
          , #{u_portfolio_url, mode=IN, jdbcType=VARCHAR}
          , #{u_id, mode=IN, jdbcType=VARCHAR}
          , #{u_pw, mode=IN, jdbcType=VARCHAR}
          , #{skill_part_code, mode=IN, jdbcType=VARCHAR}
          , #{skill_part_code1, mode=IN, jdbcType=VARCHAR}
          , #{skill_part_code2, mode=IN, jdbcType=VARCHAR}
          , #{skill_part_code3, mode=IN, jdbcType=VARCHAR}
          )}
	</select>
	
	<select id="domainList" resultType="com.test.mybatis.DomainDTO">
		SELECT DOMAIN_PART_CODE, DOMAIN_ADDRESS, DOMAIN_PART
		FROM DOMAIN_PART
	</select>
	
	<select id="positionList" resultType="com.test.mybatis.PositionDTO">
		SELECT POSITION_PART_CODE, POSITION_PART
		FROM POSITION_PART
	</select>
	
	<select id="regionList" resultType="com.test.mybatis.RegionDTO">
		SELECT REGION_PART_CODE, REGION_PART
		FROM REGION_PART
	</select>
	
	<select id="timeList" resultType="com.test.mybatis.TimeDTO">
		SELECT TIME_PART_CODE, TIME_PART
		FROM TIME_PART
	</select>
	
	<select id="subjectList" resultType="com.test.mybatis.SubjectDTO">
		SELECT SUBJECT_PART_CODE, SUBJECT_PART
		FROM SUBJECT_PART
	</select>
	
	<select id="skillList" resultType="com.test.mybatis.SkillDTO">
		SELECT SKILL_PART_CODE, SKILL_PART
		FROM SKILL_PART
	</select>
	
	<select id="search" resultType="com.test.mybatis.UserDTO">
		SELECT SUBJECT_PART_CODE, REGION_PART_CODE
		, POSITION_PART_CODE, TIME_PART_CODE, DOMAIN_PART_CODE
     	, U_NAME, U_NICKNAME, U_TEL, U_EMAIL, U_INTRO, U_PORTFOLIO_URL, U_PW
		FROM U
		WHERE U_CODE = #{u_code}
	</select>
	
	<update id="update">
		UPDATE U
		SET SUBJECT_PART_CODE = #{subject_part_code}
		    , REGION_PART_CODE = #{region_part_code}
		    , POSITION_PART_CODE = #{position_part_code}
		    , TIME_PART_CODE = #{time_part_code}
		    , DOMAIN_PART_CODE = #{domain_part_code}
		    , U_NAME = #{u_name}
		    , U_NICKNAME = #{u_nickname}
		    , U_TEL = #{u_tel}
		    , U_EMAIL = #{u_email}
		    , U_INTRO = #{u_intro}
		    , U_PORTFOLIO_URL = #{u_portfolio_url}
		    , U_PW = #{u_pw}
		WHERE U_CODE = #{u_code}
	</update>
</mapper>